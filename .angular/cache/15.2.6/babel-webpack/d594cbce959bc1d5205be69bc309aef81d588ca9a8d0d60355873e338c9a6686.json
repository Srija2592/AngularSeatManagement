{"ast":null,"code":"import { FormControl, Validators } from '@angular/forms';\nimport { tap } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../bookseat.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = function () {\n  return {\n    \"color\": \"red\"\n  };\n};\nfunction SeatComponent_p_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 4)(1, \"strong\");\n    i0.ɵɵtext(2, \"Choose available number of seats\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction0(1, _c0));\n  }\n}\nfunction SeatComponent_p_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 4)(1, \"strong\");\n    i0.ɵɵtext(2, \"You can book maximum of 6\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction0(1, _c0));\n  }\n}\nfunction SeatComponent_ng_container_9_p_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const d_r3 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate3(\"Total \", d_r3.total, \" ::Booked: \", d_r3.booked, \" ::Remaining:: \", d_r3.remaining, \"\");\n  }\n}\nfunction SeatComponent_ng_container_9_ng_container_2_ng_container_4_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 9);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const n_r11 = ctx.$implicit;\n    const r_r7 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", ctx_r10.checkBook(n_r11, r_r7.row, r_r7.rowbooked_seats) ? \"booked\" : \"notbooked\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", n_r11 + r_r7.rowstart - 1, \"\");\n  }\n}\nfunction SeatComponent_ng_container_9_ng_container_2_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, SeatComponent_ng_container_9_ng_container_2_ng_container_4_ng_container_1_Template, 3, 2, \"ng-container\", 6);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r8.sevenSeater);\n  }\n}\nfunction SeatComponent_ng_container_9_ng_container_2_ng_container_5_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 9);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const n_r14 = ctx.$implicit;\n    const r_r7 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r13 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", ctx_r13.checkBook(n_r14, r_r7.row, r_r7.rowbooked_seats) ? \"booked\" : \"notbooked\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", n_r14 + r_r7.rowstart - 1, \"\");\n  }\n}\nfunction SeatComponent_ng_container_9_ng_container_2_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, SeatComponent_ng_container_9_ng_container_2_ng_container_5_ng_container_1_Template, 3, 2, \"ng-container\", 6);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r9.threeSeater);\n  }\n}\nfunction SeatComponent_ng_container_9_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 7)(2, \"div\", 8);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, SeatComponent_ng_container_9_ng_container_2_ng_container_4_Template, 2, 1, \"ng-container\", 3);\n    i0.ɵɵtemplate(5, SeatComponent_ng_container_9_ng_container_2_ng_container_5_Template, 2, 1, \"ng-container\", 3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const r_r7 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" Row \", r_r7.row, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", r_r7.row !== 12);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", r_r7.row === 12);\n  }\n}\nfunction SeatComponent_ng_container_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, SeatComponent_ng_container_9_p_1_Template, 2, 3, \"p\", 5);\n    i0.ɵɵtemplate(2, SeatComponent_ng_container_9_ng_container_2_Template, 6, 3, \"ng-container\", 6);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const d_r3 = ctx.ngIf;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.seatavailable == true)(\"ngIfAnd\", ctx_r2.canbook == true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", d_r3.seatChart);\n  }\n}\nexport class SeatComponent {\n  constructor(bookservice, fb) {\n    this.bookservice = bookservice;\n    this.fb = fb;\n    this.noofseats = 0;\n    this.seatnumber = new FormControl(0, Validators.required);\n    this.ifavailable = true;\n    this.remaining = 0;\n    this.bookedseats = [];\n    this.seatavailable = true;\n    this.canbook = true;\n    this.sevenSeater = [1, 2, 3, 4, 5, 6, 7];\n    this.threeSeater = [1, 2, 3];\n  }\n  ngOnInit() {\n    this.createForm();\n    this.data = this.bookservice.data.pipe(tap(d => this.remaining = d.remaining));\n  }\n  createForm() {\n    this.bookingform = this.fb.group({\n      noofseats: ['', Validators.required]\n    });\n  }\n  getSeatNum(n, row) {\n    return (row - 1) * 7 + n;\n  }\n  checkBook(n, row, bs) {\n    const seat = this.getSeatNum(n, row);\n    return bs.some(bs => bs === seat);\n  }\n  sendvalue() {\n    this.ifavailable = false;\n  }\n  selectseats() {\n    if (this.noofseats <= 6) {\n      this.canbook = true;\n    } else {\n      this.canbook = false;\n    }\n    if (this.noofseats > this.remaining) {\n      this.seatavailable = false;\n    } else if (this.noofseats <= this.remaining && this.canbook == true) {\n      this.seatavailable = true;\n      this.resseats = this.bookservice.bookseats(this.noofseats);\n      this.remaining = this.resseats[1];\n      this.bookedseats = this.resseats[0];\n      let books = [];\n      books.unshift({\n        time: Date.now(),\n        seats: this.bookedseats\n      });\n      this.bookings = books;\n      this.bookservice.updatedata(this.bookedseats);\n    }\n  }\n}\nSeatComponent.ɵfac = function SeatComponent_Factory(t) {\n  return new (t || SeatComponent)(i0.ɵɵdirectiveInject(i1.BookseatService), i0.ɵɵdirectiveInject(i2.FormBuilder));\n};\nSeatComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SeatComponent,\n  selectors: [[\"app-seat\"]],\n  inputs: {\n    noofseats: \"noofseats\"\n  },\n  decls: 11,\n  vars: 5,\n  consts: [[1, \"col-sm-7\"], [3, \"ngStyle\", 4, \"ngIf\"], [3, \"click\"], [4, \"ngIf\"], [3, \"ngStyle\"], [4, \"ngIf\", \"ngIfAnd\"], [4, \"ngFor\", \"ngForOf\"], [1, \"coach_row\"], [1, \"box\", \"rowx\"], [1, \"box\", \"seat\", 3, \"ngClass\"]],\n  template: function SeatComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelement(1, \"br\");\n      i0.ɵɵtemplate(2, SeatComponent_p_2_Template, 3, 2, \"p\", 1);\n      i0.ɵɵelement(3, \"br\");\n      i0.ɵɵelementStart(4, \"button\", 2);\n      i0.ɵɵlistener(\"click\", function SeatComponent_Template_button_click_4_listener() {\n        return ctx.selectseats();\n      });\n      i0.ɵɵtext(5, \"Select Seats\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(6, SeatComponent_p_6_Template, 3, 2, \"p\", 1);\n      i0.ɵɵelementStart(7, \"h4\");\n      i0.ɵɵtext(8, \"Seat Chart\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(9, SeatComponent_ng_container_9_Template, 3, 3, \"ng-container\", 3);\n      i0.ɵɵpipe(10, \"async\");\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.seatavailable == false);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.canbook == false);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(10, 3, ctx.data));\n    }\n  },\n  dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf, i3.NgStyle, i3.AsyncPipe],\n  styles: [\".coach_row[_ngcontent-%COMP%] {\\r\\ndisplay: flex;\\r\\nalign-items: center;\\r\\njustify-content: flex-start;\\r\\nmargin-top: 1em;\\r\\n}\\r\\n\\r\\n\\r\\n.box[_ngcontent-%COMP%] {\\r\\nbox-sizing: border-box;\\r\\ndisplay: flex;\\r\\nalign-items: center;\\r\\njustify-content: center;\\r\\n width: 35px;\\r\\nheight: 60px;\\r\\ncolor: white;\\r\\n\\r\\n}\\r\\n\\r\\n.rowx[_ngcontent-%COMP%] {\\r\\nmargin-right: 32px;\\r\\nfont-size: 0.71em;\\r\\nbackground: rgb(14, 12, 12);\\r\\n}\\r\\n\\r\\n.seat.notbooked[_ngcontent-%COMP%] {\\r\\nbackground: #13b335;\\r\\nmargin: 0 2px;\\r\\n}\\r\\n\\r\\n.seat.booked[_ngcontent-%COMP%] {\\r\\nbackground: rgb(230, 4, 34);\\r\\nmargin: 0 2px;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvc2VhdC9zZWF0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBO0FBQ0EsYUFBYTtBQUNiLG1CQUFtQjtBQUNuQiwyQkFBMkI7QUFDM0IsZUFBZTtBQUNmOzs7QUFHQTtBQUNBLHNCQUFzQjtBQUN0QixhQUFhO0FBQ2IsbUJBQW1CO0FBQ25CLHVCQUF1QjtDQUN0QixXQUFXO0FBQ1osWUFBWTtBQUNaLFlBQVk7O0FBRVo7O0FBRUE7QUFDQSxrQkFBa0I7QUFDbEIsaUJBQWlCO0FBQ2pCLDJCQUEyQjtBQUMzQjs7QUFFQTtBQUNBLG1CQUFtQjtBQUNuQixhQUFhO0FBQ2I7O0FBRUE7QUFDQSwyQkFBMkI7QUFDM0IsYUFBYTtBQUNiIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbi5jb2FjaF9yb3cge1xyXG5kaXNwbGF5OiBmbGV4O1xyXG5hbGlnbi1pdGVtczogY2VudGVyO1xyXG5qdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XHJcbm1hcmdpbi10b3A6IDFlbTtcclxufVxyXG5cclxuXHJcbi5ib3gge1xyXG5ib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG5kaXNwbGF5OiBmbGV4O1xyXG5hbGlnbi1pdGVtczogY2VudGVyO1xyXG5qdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuIHdpZHRoOiAzNXB4O1xyXG5oZWlnaHQ6IDYwcHg7XHJcbmNvbG9yOiB3aGl0ZTtcclxuXHJcbn1cclxuXHJcbi5yb3d4IHtcclxubWFyZ2luLXJpZ2h0OiAzMnB4O1xyXG5mb250LXNpemU6IDAuNzFlbTtcclxuYmFja2dyb3VuZDogcmdiKDE0LCAxMiwgMTIpO1xyXG59XHJcblxyXG4uc2VhdC5ub3Rib29rZWQge1xyXG5iYWNrZ3JvdW5kOiAjMTNiMzM1O1xyXG5tYXJnaW46IDAgMnB4O1xyXG59XHJcblxyXG4uc2VhdC5ib29rZWQge1xyXG5iYWNrZ3JvdW5kOiByZ2IoMjMwLCA0LCAzNCk7XHJcbm1hcmdpbjogMCAycHg7XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["FormControl","Validators","tap","i0","SeatComponent","constructor","bookservice","fb","required","ngOnInit","createForm","data","pipe","d","remaining","bookingform","group","noofseats","getSeatNum","n","row","checkBook","bs","seat","some","sendvalue","ifavailable","selectseats","canbook","seatavailable","resseats","bookseats","bookedseats","books","unshift","time","Date","now","seats","bookings","updatedata","selectors","inputs","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\s.srija\\SeatManagement\\src\\app\\seat\\seat.component.ts","C:\\Users\\s.srija\\SeatManagement\\src\\app\\seat\\seat.component.html"],"sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { BookseatService } from '../bookseat.service';\nimport { Observable, tap } from 'rxjs';\n\n@Component({\n  selector: 'app-seat',\n  templateUrl: './seat.component.html',\n  styleUrls: ['./seat.component.css']\n})\nexport class SeatComponent implements OnInit {\n\n  constructor(private bookservice:BookseatService,private fb:FormBuilder){}\n\n  resseats:any;\n  @Input() noofseats:number=0;\n  seatnumber=new FormControl(0,Validators.required);\n  bookingform!:FormGroup;\n  ifavailable:boolean=true;\n  public data!: Observable<any>;\n  remaining:any=0;\n  bookings:any;\n  bookedseats=[];\n  seatavailable:boolean=true;\n  canbook:boolean=true;\n  public sevenSeater = [1, 2, 3, 4, 5, 6, 7];\n  public threeSeater = [1, 2, 3];\n\n  ngOnInit(): void {\n    this.createForm();\n    this.data=this.bookservice.data.pipe(tap(d=>(this.remaining=d.remaining)))\n  }\n\n  createForm(){\n    this.bookingform=this.fb.group({noofseats:['',Validators.required]});\n  }\n\n  getSeatNum(n: number, row: number): number {\n    return (row - 1) * 7 + n;\n  }\n\n  checkBook(n: number, row: number, bs: number[]): boolean {\n    const seat = this.getSeatNum(n, row);\n    return bs.some(bs => bs === seat);\n  }\n\n  sendvalue(){\n    this.ifavailable=false;\n  }\n\n  selectseats(){\n    if(this.noofseats<=6){\n      this.canbook=true;\n    }\n    else{\n      this.canbook=false;\n    }\n    if(this.noofseats>this.remaining){\n      this.seatavailable=false;\n    }\n    else if(this.noofseats<=this.remaining && this.canbook==true){\n      this.seatavailable=true;\n    this.resseats=this.bookservice.bookseats(this.noofseats);\n    this.remaining=this.resseats[1];\n    this.bookedseats=this.resseats[0];\n    let books=[];\n    books.unshift({time:Date.now(),seats:this.bookedseats});\n    this.bookings=books;\n    this.bookservice.updatedata(this.bookedseats);}\n\n\n\n  }\n}\n","\n<div class=\"col-sm-7\"><br>\n    <p *ngIf=\"seatavailable==false\" [ngStyle]=\"{'color': 'red'}\"><strong>Choose available number of seats</strong></p><br>\n    <button (click)=\"selectseats()\">Select Seats</button>\n\n    <p *ngIf=\"canbook==false\" [ngStyle]=\"{'color': 'red'}\"><strong>You can book maximum of 6</strong></p>\n\n\n  <h4>Seat Chart</h4>\n  <ng-container *ngIf=\"(data | async) as d\"  >\n\n    <p *ngIf=\"seatavailable==true and canbook==true\">Total {{d.total}} ::Booked: {{d.booked}} ::Remaining:: {{d.remaining}}</p>\n\n    <ng-container *ngFor=\"let r of d.seatChart\" >\n\n      <div class=\"coach_row\">\n        <div class=\"box rowx\"> Row {{r.row}} </div>\n        <ng-container *ngIf=\"r.row !== 12\">\n\n          <ng-container *ngFor=\"let n of sevenSeater;\">\n            <div  class=\"box seat\" [ngClass]=\"checkBook(n,r.row,r.rowbooked_seats) ? 'booked': 'notbooked'\">\n              {{n + r.rowstart-1}}</div>\n          </ng-container>\n\n        </ng-container>\n\n        <ng-container *ngIf=\"r.row === 12\">\n\n          <ng-container *ngFor=\"let n of threeSeater;\">\n            <div class=\"box seat\"  [ngClass]=\"checkBook(n,r.row, r.rowbooked_seats) ? 'booked': 'notbooked'\">\n              {{n + r.rowstart-1}}</div>\n          </ng-container>\n\n        </ng-container>\n\n\n      </div>\n\n    </ng-container>\n  </ng-container>\n</div>\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}