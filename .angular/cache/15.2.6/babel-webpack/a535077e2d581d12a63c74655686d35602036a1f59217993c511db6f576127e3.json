{"ast":null,"code":"import { FormControl, Validators } from '@angular/forms';\nimport { tap } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../bookseat.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common\";\nfunction SeatComponent_ng_container_3_ng_container_3_ng_container_4_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 6);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const n_r7 = ctx.$implicit;\n    const r_r3 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", ctx_r6.checkBook(n_r7, r_r3.row, r_r3.rowbooked_seats) ? \"booked\" : \"notbooked\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", n_r7 + r_r3.rowstart - 1, \"\");\n  }\n}\nfunction SeatComponent_ng_container_3_ng_container_3_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, SeatComponent_ng_container_3_ng_container_3_ng_container_4_ng_container_1_Template, 3, 2, \"ng-container\", 3);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.sevenSeater);\n  }\n}\nfunction SeatComponent_ng_container_3_ng_container_3_ng_container_5_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 6);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const n_r10 = ctx.$implicit;\n    const r_r3 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", ctx_r9.checkBook(n_r10, r_r3.row, r_r3.rowbooked_seats) ? \"booked\" : \"notbooked\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", n_r10 + r_r3.rowstart - 1, \"\");\n  }\n}\nfunction SeatComponent_ng_container_3_ng_container_3_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, SeatComponent_ng_container_3_ng_container_3_ng_container_5_ng_container_1_Template, 3, 2, \"ng-container\", 3);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r5.threeSeater);\n  }\n}\nfunction SeatComponent_ng_container_3_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 4)(2, \"div\", 5);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, SeatComponent_ng_container_3_ng_container_3_ng_container_4_Template, 2, 1, \"ng-container\", 1);\n    i0.ɵɵtemplate(5, SeatComponent_ng_container_3_ng_container_3_ng_container_5_Template, 2, 1, \"ng-container\", 1);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const r_r3 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" Row \", r_r3.row, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", r_r3.row !== 12);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", r_r3.row === 12);\n  }\n}\nfunction SeatComponent_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, SeatComponent_ng_container_3_ng_container_3_Template, 6, 3, \"ng-container\", 3);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const d_r1 = ctx.ngIf;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\"Total \", d_r1.total, \" ::Booked: \", d_r1.booked, \" ::Remaining:: \", d_r1.remaining, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", d_r1.seatChart);\n  }\n}\nexport class SeatComponent {\n  constructor(bookservice, fb) {\n    this.bookservice = bookservice;\n    this.fb = fb;\n    this.noofseats = 0;\n    this.seatnumber = new FormControl(0, Validators.required);\n    this.ifavailable = true;\n    this.remaining = 0;\n    this.bookedseats = [];\n    this.seatavailable = true;\n    this.sevenSeater = [1, 2, 3, 4, 5, 6, 7];\n    this.threeSeater = [1, 2, 3];\n  }\n  ngOnInit() {\n    this.createForm();\n    this.data = this.bookservice.data.pipe(tap(d => this.remaining = d.remaining));\n  }\n  createForm() {\n    this.bookingform = this.fb.group({\n      noofseats: ['', Validators.required]\n    });\n  }\n  getSeatNum(n, row) {\n    return (row - 1) * 7 + n;\n  }\n  checkBook(n, row, bs) {\n    const seat = this.getSeatNum(n, row);\n    return bs.some(bs => bs === seat);\n  }\n  sendvalue() {\n    this.ifavailable = false;\n  }\n  selectseats() {\n    if (this.noofseats > this.remaining) {\n      this.seatavailable = false;\n      console.log(\"unavailable\");\n    }\n    this.resseats = this.bookservice.bookseats(this.noofseats);\n    this.remaining = this.resseats[1];\n    this.bookedseats = this.resseats[0];\n    let books = [];\n    books.unshift({\n      time: Date.now(),\n      seats: this.bookedseats\n    });\n    this.bookings = books;\n    this.bookservice.updatedata(this.bookedseats);\n  }\n}\nSeatComponent.ɵfac = function SeatComponent_Factory(t) {\n  return new (t || SeatComponent)(i0.ɵɵdirectiveInject(i1.BookseatService), i0.ɵɵdirectiveInject(i2.FormBuilder));\n};\nSeatComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SeatComponent,\n  selectors: [[\"app-seat\"]],\n  inputs: {\n    noofseats: \"noofseats\"\n  },\n  decls: 8,\n  vars: 3,\n  consts: [[1, \"col-sm-7\"], [4, \"ngIf\"], [3, \"click\"], [4, \"ngFor\", \"ngForOf\"], [1, \"coach_row\"], [1, \"box\", \"rowx\"], [1, \"box\", \"seat\", 3, \"ngClass\"]],\n  template: function SeatComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h4\");\n      i0.ɵɵtext(2, \"Seat Chart\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(3, SeatComponent_ng_container_3_Template, 4, 4, \"ng-container\", 1);\n      i0.ɵɵpipe(4, \"async\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(5, \"br\");\n      i0.ɵɵelementStart(6, \"button\", 2);\n      i0.ɵɵlistener(\"click\", function SeatComponent_Template_button_click_6_listener() {\n        return ctx.selectseats();\n      });\n      i0.ɵɵtext(7, \"Select Seats\");\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(4, 1, ctx.data));\n    }\n  },\n  dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf, i3.AsyncPipe],\n  styles: [\".coach_row[_ngcontent-%COMP%] {\\r\\ndisplay: flex;\\r\\nalign-items: center;\\r\\njustify-content: flex-start;\\r\\nmargin-top: 1em;\\r\\n}\\r\\n\\r\\n\\r\\n.box[_ngcontent-%COMP%] {\\r\\nbox-sizing: border-box;\\r\\ndisplay: flex;\\r\\nalign-items: center;\\r\\njustify-content: center;\\r\\n width: 35px;\\r\\nheight: 60px;\\r\\ncolor: white;\\r\\n\\r\\n}\\r\\n\\r\\n.rowx[_ngcontent-%COMP%] {\\r\\nmargin-right: 32px;\\r\\nfont-size: 0.71em;\\r\\nbackground: rgb(14, 12, 12);\\r\\n}\\r\\n\\r\\n.seat.notbooked[_ngcontent-%COMP%] {\\r\\nbackground: #13b335;\\r\\nmargin: 0 2px;\\r\\n}\\r\\n\\r\\n.seat.booked[_ngcontent-%COMP%] {\\r\\nbackground: rgb(230, 4, 34);\\r\\nmargin: 0 2px;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvc2VhdC9zZWF0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBO0FBQ0EsYUFBYTtBQUNiLG1CQUFtQjtBQUNuQiwyQkFBMkI7QUFDM0IsZUFBZTtBQUNmOzs7QUFHQTtBQUNBLHNCQUFzQjtBQUN0QixhQUFhO0FBQ2IsbUJBQW1CO0FBQ25CLHVCQUF1QjtDQUN0QixXQUFXO0FBQ1osWUFBWTtBQUNaLFlBQVk7O0FBRVo7O0FBRUE7QUFDQSxrQkFBa0I7QUFDbEIsaUJBQWlCO0FBQ2pCLDJCQUEyQjtBQUMzQjs7QUFFQTtBQUNBLG1CQUFtQjtBQUNuQixhQUFhO0FBQ2I7O0FBRUE7QUFDQSwyQkFBMkI7QUFDM0IsYUFBYTtBQUNiIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbi5jb2FjaF9yb3cge1xyXG5kaXNwbGF5OiBmbGV4O1xyXG5hbGlnbi1pdGVtczogY2VudGVyO1xyXG5qdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XHJcbm1hcmdpbi10b3A6IDFlbTtcclxufVxyXG5cclxuXHJcbi5ib3gge1xyXG5ib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG5kaXNwbGF5OiBmbGV4O1xyXG5hbGlnbi1pdGVtczogY2VudGVyO1xyXG5qdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuIHdpZHRoOiAzNXB4O1xyXG5oZWlnaHQ6IDYwcHg7XHJcbmNvbG9yOiB3aGl0ZTtcclxuXHJcbn1cclxuXHJcbi5yb3d4IHtcclxubWFyZ2luLXJpZ2h0OiAzMnB4O1xyXG5mb250LXNpemU6IDAuNzFlbTtcclxuYmFja2dyb3VuZDogcmdiKDE0LCAxMiwgMTIpO1xyXG59XHJcblxyXG4uc2VhdC5ub3Rib29rZWQge1xyXG5iYWNrZ3JvdW5kOiAjMTNiMzM1O1xyXG5tYXJnaW46IDAgMnB4O1xyXG59XHJcblxyXG4uc2VhdC5ib29rZWQge1xyXG5iYWNrZ3JvdW5kOiByZ2IoMjMwLCA0LCAzNCk7XHJcbm1hcmdpbjogMCAycHg7XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["FormControl","Validators","tap","i0","SeatComponent","constructor","bookservice","fb","required","ngOnInit","createForm","data","pipe","d","remaining","bookingform","group","noofseats","getSeatNum","n","row","checkBook","bs","seat","some","sendvalue","ifavailable","selectseats","seatavailable","console","log","resseats","bookseats","bookedseats","books","unshift","time","Date","now","seats","bookings","updatedata","selectors","inputs","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\s.srija\\SeatManagement\\src\\app\\seat\\seat.component.ts","C:\\Users\\s.srija\\SeatManagement\\src\\app\\seat\\seat.component.html"],"sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { BookseatService } from '../bookseat.service';\nimport { Observable, tap } from 'rxjs';\n\n@Component({\n  selector: 'app-seat',\n  templateUrl: './seat.component.html',\n  styleUrls: ['./seat.component.css']\n})\nexport class SeatComponent implements OnInit {\n\n  constructor(private bookservice:BookseatService,private fb:FormBuilder){}\n\n  resseats:any;\n  @Input() noofseats:number=0;\n  seatnumber=new FormControl(0,Validators.required);\n  bookingform!:FormGroup;\n  ifavailable:boolean=true;\n  public data!: Observable<any>;\n  remaining:any=0;\n  bookings:any;\n  bookedseats=[];\n  seatavailable:boolean=true;\n  public sevenSeater = [1, 2, 3, 4, 5, 6, 7];\n  public threeSeater = [1, 2, 3];\n\n  ngOnInit(): void {\n    this.createForm();\n    this.data=this.bookservice.data.pipe(tap(d=>(this.remaining=d.remaining)))\n  }\n\n  createForm(){\n    this.bookingform=this.fb.group({noofseats:['',Validators.required]});\n  }\n\n  getSeatNum(n: number, row: number): number {\n    return (row - 1) * 7 + n;\n  }\n\n  checkBook(n: number, row: number, bs: number[]): boolean {\n    const seat = this.getSeatNum(n, row);\n    return bs.some(bs => bs === seat);\n  }\n\n  sendvalue(){\n    this.ifavailable=false;\n  }\n\n  selectseats(){\n    if(this.noofseats>this.remaining){\n      this.seatavailable=false;\n      console.log(\"unavailable\");\n\n    }\n    this.resseats=this.bookservice.bookseats(this.noofseats);\n    this.remaining=this.resseats[1];\n    this.bookedseats=this.resseats[0];\n    let books=[];\n    books.unshift({time:Date.now(),seats:this.bookedseats});\n    this.bookings=books;\n    this.bookservice.updatedata(this.bookedseats);\n\n\n\n  }\n}\n","\n<div class=\"col-sm-7\">\n  <h4>Seat Chart</h4>\n  <ng-container *ngIf=\"(data | async) as d\" >\n\n    <p>Total {{d.total}} ::Booked: {{d.booked}} ::Remaining:: {{d.remaining}}</p>\n\n    <ng-container *ngFor=\"let r of d.seatChart\" >\n\n      <div class=\"coach_row\">\n        <div class=\"box rowx\"> Row {{r.row}} </div>\n        <ng-container *ngIf=\"r.row !== 12\">\n\n          <ng-container *ngFor=\"let n of sevenSeater;\">\n            <div class=\"box seat\" [ngClass]=\"checkBook(n,r.row,r.rowbooked_seats) ? 'booked': 'notbooked'\">\n              {{n + r.rowstart-1}}</div>\n          </ng-container>\n\n        </ng-container>\n\n        <ng-container *ngIf=\"r.row === 12\">\n\n          <ng-container *ngFor=\"let n of threeSeater;\">\n            <div class=\"box seat\" [ngClass]=\"checkBook(n,r.row, r.rowbooked_seats) ? 'booked': 'notbooked'\">\n              {{n + r.rowstart-1}}</div>\n          </ng-container>\n\n        </ng-container>\n\n\n      </div>\n\n    </ng-container>\n  </ng-container>\n</div>\n<br>\n<button (click)=\"selectseats()\">Select Seats</button>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}